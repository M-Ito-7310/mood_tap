# MVP Features

## MVP(Minimum Viable Product)の定義

MoodTapのMVPは、**「1タップで気分を記録し、カレンダーで可視化する」**という核心的な価値を最速で実現することを目標とします。開発期間は2-3日(14-18時間)を想定し、以下の3カテゴリに機能を分類します。

---

## 機能分類

### ✅ 必須機能(MUST HAVE)
MVP完成に絶対必要な機能。これがないとプロダクトの価値が成立しない。

### 🔶 オプション機能(NICE TO HAVE)
MVPに含めると価値が向上するが、なくても成立する機能。時間があれば実装。

### ❌ 対象外機能(OUT OF SCOPE)
Phase 2以降の拡張として後回しにする機能。

---

## ✅ 必須機能(MUST HAVE)

### 1. 気分記録機能
**優先度**: P0(最高)
**所要時間**: 90-120分

#### 機能詳細
- **5段階の気分アイコン**
  - 😄 とても良い(Very Good) - スコア: 5
  - 😊 良い(Good) - スコア: 4
  - 😐 普通(Neutral) - スコア: 3
  - 😔 悪い(Bad) - スコア: 2
  - 😢 とても悪い(Very Bad) - スコア: 1

- **1タップで記録完了**
  - アイコンをタップすると即座に記録
  - 確認ダイアログなし(操作の高速化)
  - 記録完了のフィードバック(トースト通知)

- **日付・時刻の自動記録**
  - 記録時のタイムスタンプを自動保存
  - 1日1回の記録を推奨(複数回も可能)

#### 技術要件
- React Stateでの気分データ管理
- LocalStorage/IndexedDBでの永続化
- Zod バリデーション

#### 成功基準
- [ ] 5段階アイコンが正しく表示
- [ ] タップで即座に記録
- [ ] 記録後にトースト通知表示
- [ ] ページリロード後もデータ保持

---

### 2. カレンダー表示機能
**優先度**: P0(最高)
**所要時間**: 90-120分

#### 機能詳細
- **月次カレンダービュー**
  - 現在月のカレンダーを表示
  - 日付ごとに気分アイコンを表示
  - 記録のない日はグレーアウト

- **ヒートマップカラー**
  - 気分スコアに応じた色分け
    - スコア5: 濃い青(#3B82F6)
    - スコア4: 薄い青(#60A5FA)
    - スコア3: グレー(#9CA3AF)
    - スコア2: オレンジ(#FB923C)
    - スコア1: 赤(#EF4444)

- **日別詳細表示**
  - カレンダーの日付をクリック
  - その日の記録詳細を表示(気分、メモ、時刻)

#### 技術要件
- カレンダーライブラリ(react-calendar or 自作)
- 日付操作(date-fns or dayjs)
- レスポンシブデザイン

#### 成功基準
- [ ] 現在月のカレンダーが表示
- [ ] 記録された気分が色分けで可視化
- [ ] 日付クリックで詳細表示
- [ ] 月の切り替えが可能

---

### 3. 基本UI/UXコンポーネント
**優先度**: P0(最高)
**所要時間**: 60-90分

#### 機能詳細
- **ランディングページ**
  - アプリの説明(3秒で完了、カレンダー可視化)
  - 「今すぐ始める」ボタン
  - デモ動画/スクリーンショット

- **メインダッシュボード**
  - 今日の気分記録エリア(5段階アイコン)
  - カレンダー表示エリア
  - 統計サマリー(今週の平均気分等)

- **ナビゲーション**
  - ホーム、カレンダー、統計(タブ切り替え)

#### 技術要件
- Tailwind CSSでのレイアウト
- Lucide Reactでのアイコン
- レスポンシブ対応

#### 成功基準
- [ ] ランディングページが魅力的
- [ ] ダッシュボードが直感的
- [ ] モバイルでも操作しやすい

---

### 4. データ永続化(ローカル)
**優先度**: P0(最高)
**所要時間**: 45-60分

#### 機能詳細
- **LocalStorageでの保存**
  - 気分記録データをJSON形式で保存
  - ページリロード後もデータ保持

- **データ構造**
  ```typescript
  interface MoodEntry {
    id: string; // UUID
    date: string; // ISO 8601 format
    moodScore: 1 | 2 | 3 | 4 | 5; // 気分スコア
    note?: string; // オプションメモ
    createdAt: string; // 記録時刻
  }
  ```

#### 技術要件
- LocalStorage API
- JSON.stringify/parse
- エラーハンドリング

#### 成功基準
- [ ] データがLocalStorageに保存
- [ ] リロード後もデータ復元
- [ ] データ破損時のエラーハンドリング

---

## 🔶 オプション機能(NICE TO HAVE)

### 5. メモ機能
**優先度**: P1(中)
**所要時間**: 60-90分

#### 機能詳細
- **一言メモの追加**
  - 気分記録時に任意でメモを追加
  - 文字数制限: 100文字
  - プレースホルダー: 「今日の気分について一言...」

- **メモの表示**
  - カレンダーの日付クリックで表示
  - メモがある日はアイコンにバッジ表示

#### 技術要件
- Textarea コンポーネント
- 文字数カウンター
- バリデーション

#### 成功基準
- [ ] メモが記録できる
- [ ] 100文字を超えると警告
- [ ] カレンダーでメモ有無を確認可能

---

### 6. 統計・可視化機能
**優先度**: P1(中)
**所要時間**: 60-90分

#### 機能詳細
- **週次/月次の気分傾向グラフ**
  - 折れ線グラフで気分の推移を表示
  - 週次: 過去7日間
  - 月次: 過去30日間

- **平均気分スコア**
  - 週次/月次の平均スコアを表示
  - スコアに応じた評価コメント
    - 4.5以上: 「とても良好です!」
    - 3.5-4.5: 「安定しています」
    - 2.5-3.5: 「普通です」
    - 2.5未満: 「少し注意が必要かも」

- **連続記録日数(ストリーク)**
  - 連続で記録した日数を表示
  - アニメーション付きカウンター

#### 技術要件
- Chart.js or Recharts
- 統計計算ロジック
- アニメーションライブラリ

#### 成功基準
- [ ] グラフが正しく表示
- [ ] 平均スコアの計算が正確
- [ ] ストリーク表示が正しい

---

### 7. データエクスポート機能
**優先度**: P2(低)
**所要時間**: 30-45分

#### 機能詳細
- **CSV形式でのエクスポート**
  - 全記録データをCSVファイルとして出力
  - カウンセラー等との共有用

- **エクスポート項目**
  - 日付、気分スコア、メモ、記録時刻

#### 技術要件
- CSV生成ライブラリ(papaparse)
- ダウンロード機能

#### 成功基準
- [ ] CSVファイルが正しく生成
- [ ] Excelで開ける
- [ ] データが正しくエクスポート

---

### 8. PWA対応(オフライン利用)
**優先度**: P1(中)
**所要時間**: 30-45分

#### 機能詳細
- **スマホホーム画面への追加**
  - manifest.jsonの設定
  - アイコン、スプラッシュスクリーン

- **オフライン利用**
  - Service Workerによるキャッシュ
  - オフラインでも記録可能

#### 技術要件
- next-pwa
- manifest.json
- Service Worker

#### 成功基準
- [ ] ホーム画面に追加可能
- [ ] オフラインで動作
- [ ] アイコンが正しく表示

---

## ❌ 対象外機能(OUT OF SCOPE)

### Phase 2以降の拡張機能

#### 9. ユーザー認証(NextAuth.js)
**理由**: MVP段階ではローカルストレージで十分。認証はPhase 2で実装。
**想定工数**: 120-180分

---

#### 10. データベース連携(Neon PostgreSQL)
**理由**: MVP段階ではLocalStorageで代用。Phase 2でバックエンド実装。
**想定工数**: 60-90分

---

#### 11. プッシュ通知・リマインダー
**理由**: 習慣化の補助機能として有効だが、MVPの核心機能ではない。
**想定工数**: 90-120分

---

#### 12. AI分析・感情予測
**理由**: 高度な機能で開発工数が大きい。Phase 3以降。
**想定工数**: 240-360分

---

#### 13. ソーシャル機能(友達との共有)
**理由**: メンタルヘルス記録はプライベートな情報。慎重な検討が必要。
**想定工数**: 180-240分

---

#### 14. 多言語対応
**理由**: 国内ユーザーをまず獲得。グローバル展開はPhase 4以降。
**想定工数**: 60-90分

---

#### 15. ダークモード
**理由**: UI/UX向上に有効だが、MVP必須ではない。Phase 2で実装検討。
**想定工数**: 30-45分

---

#### 16. アクセシビリティ強化(WCAG AAA準拠)
**理由**: 基本的なアクセシビリティは確保するが、完全準拠はPhase 3以降。
**想定工数**: 120-180分

---

## 機能実装優先順位マトリクス

### MVPフェーズ(Phase 1)

| 機能 | 優先度 | 所要時間 | 実装順序 |
|------|-------|---------|---------|
| 気分記録機能 | P0 | 90-120分 | 1 |
| カレンダー表示 | P0 | 90-120分 | 2 |
| 基本UI/UX | P0 | 60-90分 | 3 |
| データ永続化 | P0 | 45-60分 | 4 |
| メモ機能 | P1 | 60-90分 | 5 |
| 統計・可視化 | P1 | 60-90分 | 6 |
| PWA対応 | P1 | 30-45分 | 7 |
| データエクスポート | P2 | 30-45分 | 8 |

### Phase 2以降

| 機能 | 優先度 | 想定工数 | 実装フェーズ |
|------|-------|---------|------------|
| ユーザー認証 | P0 | 120-180分 | Phase 2 |
| データベース連携 | P0 | 60-90分 | Phase 2 |
| ダークモード | P1 | 30-45分 | Phase 2 |
| プッシュ通知 | P1 | 90-120分 | Phase 3 |
| 多言語対応 | P1 | 60-90分 | Phase 3 |
| AI分析 | P2 | 240-360分 | Phase 4 |
| ソーシャル機能 | P2 | 180-240分 | Phase 5 |

---

## 開発スコープ決定のガイドライン

### MVPに含める基準
1. **核心的価値の実現**: 「1タップで記録」「カレンダー可視化」に直結するか
2. **技術的実現可能性**: 2-3日で実装可能か
3. **ユーザー体験の完結性**: この機能がないと体験が成立しないか

### Phase 2以降に回す基準
1. **付加的価値**: あると嬉しいが、なくても成立する
2. **複雑性**: 実装に時間がかかる、または依存関係が多い
3. **検証が必要**: ユーザーフィードバックを得てから実装すべき

---

## MVP成功基準(KPI)

### 技術的KPI
- [ ] ビルド成功率: 100%
- [ ] TypeScript型エラー: 0件
- [ ] Lighthouse Performance: 90点以上
- [ ] モバイル対応: レスポンシブ完璧

### 機能的KPI
- [ ] 気分記録: 3秒以内に完了
- [ ] カレンダー表示: 1秒以内にレンダリング
- [ ] データ永続化: 100%成功
- [ ] オフライン動作: PWA対応完了

### ユーザー体験KPI
- [ ] 初回利用: 説明なしで操作可能
- [ ] 継続率: デモユーザー30日継続率80%以上
- [ ] 満足度: 「続けられそう」と感じる率90%以上

---

## まとめ

MoodTapのMVPは、**必須機能4つ(気分記録、カレンダー、UI、永続化)**を核として、オプション機能4つ(メモ、統計、PWA、エクスポート)を時間に応じて追加します。

**スコープの鉄則**: 「1タップで完了」「カレンダー可視化」という核心価値を最速で実現し、ユーザーフィードバックを得ることを最優先します。

---

**ドキュメント作成者**: AI Agent (Claude)
**作成日**: 2025年10月23日
**バージョン**: 1.0
